{"version":3,"sources":["../../../../src/lib/chips/chip-list.ts"],"names":[],"mappings":"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","file":"chip-list.js","sourceRoot":"","sourcesContent":["import {\n  AfterContentInit,\n  ChangeDetectionStrategy,\n  Component,\n  ContentChildren,\n  ElementRef,\n  Input,\n  QueryList,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport {MdChip} from './chip';\nimport {FocusKeyManager} from '../core/a11y/focus-key-manager';\nimport {coerceBooleanProperty} from '../core/coercion/boolean-property';\nimport {SPACE, LEFT_ARROW, RIGHT_ARROW} from '../core/keyboard/keycodes';\n/**\n * A material design chips component (named ChipList for it's similarity to the List component).\n * \n * Example:\n * \n *     <md-chip-list>\n *       <md-chip>Chip 1<md-chip>\n *       <md-chip>Chip 2<md-chip>\n *     </md-chip-list>\n */\nexport class MdChipList implements AfterContentInit {\n/**\n * Track which chips we're listening to for focus/destruction.\n */\nprivate _subscribed: WeakMap<MdChip, boolean> = new WeakMap();\n/**\n * Whether or not the chip is selectable.\n */\nprotected _selectable: boolean = true;\n/**\n * The FocusKeyManager which handles focus.\n */\n_keyManager: FocusKeyManager;\n/**\n * The chip components contained within this chip list.\n */\nchips: QueryList<MdChip>;\n/**\n * @param {?} _elementRef\n */\nconstructor(private _elementRef: ElementRef) { }\n/**\n * @return {?}\n */\nngAfterContentInit(): void {\n    this._keyManager = new FocusKeyManager(this.chips).withWrap();\n\n    // Go ahead and subscribe all of the initial chips\n    this._subscribeChips(this.chips);\n\n    // When the list changes, re-subscribe\n    this.chips.changes.subscribe((chips: QueryList<MdChip>) => {\n      this._subscribeChips(chips);\n    });\n  }\n/**\n * Whether or not this chip is selectable. When a chip is not selectable,\n * it's selected state is always ignored.\n * @return {?}\n */\nget selectable(): boolean {\n    return this._selectable;\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nset selectable(value: boolean) {\n    this._selectable = coerceBooleanProperty(value);\n  }\n/**\n * Programmatically focus the chip list. This in turn focuses the first\n * non-disabled chip in this chip list.\n * @return {?}\n */\nfocus() {\n    // TODO: ARIA says this should focus the first `selected` chip.\n    this._keyManager.setFirstItemActive();\n  }\n/**\n * Passes relevant key presses to our key manager.\n * @param {?} event\n * @return {?}\n */\n_keydown(event: KeyboardEvent) {\n    let /** @type {?} */ target = /** @type {?} */(( event.target as HTMLElement));\n\n    // If they are on a chip, check for space/left/right, otherwise pass to our key manager\n    if (target && target.classList.contains('mat-chip')) {\n      switch (event.keyCode) {\n        case SPACE:\n          // If we are selectable, toggle the focused chip\n          if (this.selectable) {\n            this._toggleSelectOnFocusedChip();\n          }\n\n          // Always prevent space from scrolling the page since the list has focus\n          event.preventDefault();\n          break;\n        case LEFT_ARROW:\n          this._keyManager.setPreviousItemActive();\n          event.preventDefault();\n          break;\n        case RIGHT_ARROW:\n          this._keyManager.setNextItemActive();\n          event.preventDefault();\n          break;\n        default:\n          this._keyManager.onKeydown(event);\n      }\n    }\n  }\n/**\n * Toggles the selected state of the currently focused chip.\n * @return {?}\n */\nprotected _toggleSelectOnFocusedChip(): void {\n    // Allow disabling of chip selection\n    if (!this.selectable) {\n      return;\n    }\n\n    let /** @type {?} */ focusedIndex = this._keyManager.activeItemIndex;\n\n    if (this._isValidIndex(focusedIndex)) {\n      let /** @type {?} */ focusedChip: MdChip = this.chips.toArray()[focusedIndex];\n\n      if (focusedChip) {\n        focusedChip.toggleSelected();\n      }\n    }\n  }\n/**\n * Iterate through the list of chips and add them to our list of\n * subscribed chips.\n * \n * @param {?} chips The list of chips to be subscribed.\n * @return {?}\n */\nprotected _subscribeChips(chips: QueryList<MdChip>): void {\n    chips.forEach(chip => this._addChip(chip));\n  }\n/**\n * Add a specific chip to our subscribed list. If the chip has\n * already been subscribed, this ensures it is only subscribed\n * once.\n * \n * @param {?} chip The chip to be subscribed (or checked for existing\n * subscription).\n * @return {?}\n */\nprotected _addChip(chip: MdChip) {\n    // If we've already been subscribed to a parent, do nothing\n    if (this._subscribed.has(chip)) {\n      return;\n    }\n\n    // Watch for focus events outside of the keyboard navigation\n    chip.onFocus.subscribe(() => {\n      let /** @type {?} */ chipIndex: number = this.chips.toArray().indexOf(chip);\n\n      if (this._isValidIndex(chipIndex)) {\n        this._keyManager.updateActiveItemIndex(chipIndex);\n      }\n    });\n\n    // On destroy, remove the item from our list, and check focus\n    chip.destroy.subscribe(() => {\n      let /** @type {?} */ chipIndex: number = this.chips.toArray().indexOf(chip);\n\n      if (this._isValidIndex(chipIndex)) {\n        // Check whether the chip is the last item\n        if (chipIndex < this.chips.length - 1) {\n          this._keyManager.setActiveItem(chipIndex);\n        } else if (chipIndex - 1 >= 0) {\n          this._keyManager.setActiveItem(chipIndex - 1);\n        }\n      }\n\n      this._subscribed.delete(chip);\n      chip.destroy.unsubscribe();\n    });\n\n    this._subscribed.set(chip, true);\n  }\n/**\n * Utility to ensure all indexes are valid.\n * \n * @param {?} index The index to be checked.\n * @return {?} True if the index is valid for our list of chips.\n */\nprivate _isValidIndex(index: number): boolean {\n    return index >= 0 && index < this.chips.length;\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  moduleId: module.id,\n  selector: 'md-chip-list, mat-chip-list',\n  template: `<div class=\"mat-chip-list-wrapper\"><ng-content></ng-content></div>`,\n  host: {\n    // Properties\n    'tabindex': '0',\n    'role': 'listbox',\n    '[class.mat-chip-list]': 'true',\n\n    // Events\n    '(focus)': 'focus()',\n    '(keydown)': '_keydown($event)'\n  },\n  queries: {\n    chips: new ContentChildren(MdChip)\n  },\n  styleUrls: ['chips.css'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'selectable': [{ type: Input },],\n};\n}\n\nfunction MdChipList_tsickle_Closure_declarations() {\n/** @type {?} */\nMdChipList.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMdChipList.ctorParameters;\n/** @type {?} */\nMdChipList.propDecorators;\n/**\n * Track which chips we're listening to for focus/destruction.\n * @type {?}\n */\nMdChipList.prototype._subscribed;\n/**\n * Whether or not the chip is selectable.\n * @type {?}\n */\nMdChipList.prototype._selectable;\n/**\n * The FocusKeyManager which handles focus.\n * @type {?}\n */\nMdChipList.prototype._keyManager;\n/**\n * The chip components contained within this chip list.\n * @type {?}\n */\nMdChipList.prototype.chips;\n/** @type {?} */\nMdChipList.prototype._elementRef;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}