{"version":3,"sources":["../../../../../src/lib/core/a11y/focus-trap.ts"],"names":[],"mappings":"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","file":"focus-trap.js","sourceRoot":"","sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  NgZone,\n  OnDestroy,\n  AfterContentInit,\n  Injectable,\n} from '@angular/core';\nimport {InteractivityChecker} from './interactivity-checker';\nimport {coerceBooleanProperty} from '../coercion/boolean-property';\n/**\n * Class that allows for trapping focus within a DOM element.\n * \n * NOTE: This class currently uses a very simple (naive) approach to focus trapping.\n * It assumes that the tab order is the same as DOM order, which is not necessarily true.\n * Things like tabIndex > 0, flex `order`, and shadow roots can cause to two to misalign.\n * This will be replaced with a more intelligent solution before the library is considered stable.\n */\nexport class FocusTrap {\nprivate _startAnchor: HTMLElement;\nprivate _endAnchor: HTMLElement;\n/**\n * Whether the focus trap is active.\n * @return {?}\n */\nget enabled(): boolean { return this._enabled; }\n/**\n * @param {?} val\n * @return {?}\n */\nset enabled(val: boolean) {\n    this._enabled = val;\n\n    if (this._startAnchor && this._endAnchor) {\n      this._startAnchor.tabIndex = this._endAnchor.tabIndex = this._enabled ? 0 : -1;\n    }\n  }\nprivate _enabled: boolean = true;\n/**\n * @param {?} _element\n * @param {?} _checker\n * @param {?} _ngZone\n * @param {?=} deferAnchors\n */\nconstructor(\nprivate _element: HTMLElement,\nprivate _checker: InteractivityChecker,\nprivate _ngZone: NgZone,\n    deferAnchors = false) {\n\n    if (!deferAnchors) {\n      this.attachAnchors();\n    }\n  }\n/**\n * Destroys the focus trap by cleaning up the anchors.\n * @return {?}\n */\ndestroy() {\n    if (this._startAnchor && this._startAnchor.parentNode) {\n      this._startAnchor.parentNode.removeChild(this._startAnchor);\n    }\n\n    if (this._endAnchor && this._endAnchor.parentNode) {\n      this._endAnchor.parentNode.removeChild(this._endAnchor);\n    }\n\n    this._startAnchor = this._endAnchor = null;\n  }\n/**\n * Inserts the anchors into the DOM. This is usually done automatically\n * in the constructor, but can be deferred for cases like directives with `*ngIf`.\n * @return {?}\n */\nattachAnchors(): void {\n    if (!this._startAnchor) {\n      this._startAnchor = this._createAnchor();\n    }\n\n    if (!this._endAnchor) {\n      this._endAnchor = this._createAnchor();\n    }\n\n    this._ngZone.runOutsideAngular(() => {\n      this._startAnchor.addEventListener('focus', () => this.focusLastTabbableElement());\n      this._endAnchor.addEventListener('focus', () => this.focusFirstTabbableElement());\n\n      this._element.parentNode.insertBefore(this._startAnchor, this._element);\n      this._element.parentNode.insertBefore(this._endAnchor, this._element.nextSibling);\n    });\n  }\n/**\n * Waits for microtask queue to empty, then focuses\n * the first tabbable element within the focus trap region.\n * @return {?}\n */\nfocusFirstTabbableElementWhenReady() {\n    this._ngZone.onMicrotaskEmpty.first().subscribe(() => this.focusFirstTabbableElement());\n  }\n/**\n * Waits for microtask queue to empty, then focuses\n * the last tabbable element within the focus trap region.\n * @return {?}\n */\nfocusLastTabbableElementWhenReady() {\n    this._ngZone.onMicrotaskEmpty.first().subscribe(() => this.focusLastTabbableElement());\n  }\n/**\n * Focuses the first tabbable element within the focus trap region.\n * @return {?}\n */\nfocusFirstTabbableElement() {\n    let /** @type {?} */ redirectToElement = /** @type {?} */(( this._element.querySelector('[cdk-focus-start]') as HTMLElement)) ||\n                            this._getFirstTabbableElement(this._element);\n\n    if (redirectToElement) {\n      redirectToElement.focus();\n    }\n  }\n/**\n * Focuses the last tabbable element within the focus trap region.\n * @return {?}\n */\nfocusLastTabbableElement() {\n    let /** @type {?} */ focusTargets = this._element.querySelectorAll('[cdk-focus-end]');\n    let /** @type {?} */ redirectToElement: HTMLElement = null;\n\n    if (focusTargets.length) {\n      redirectToElement = /** @type {?} */(( focusTargets[focusTargets.length - 1] as HTMLElement));\n    } else {\n      redirectToElement = this._getLastTabbableElement(this._element);\n    }\n\n    if (redirectToElement) {\n      redirectToElement.focus();\n    }\n  }\n/**\n * Get the first tabbable element from a DOM subtree (inclusive).\n * @param {?} root\n * @return {?}\n */\nprivate _getFirstTabbableElement(root: HTMLElement): HTMLElement {\n    if (this._checker.isFocusable(root) && this._checker.isTabbable(root)) {\n      return root;\n    }\n\n    // Iterate in DOM order. Note that IE doesn't have `children` for SVG so we fall\n    // back to `childNodes` which includes text nodes, comments etc.\n    let /** @type {?} */ children = root.children || root.childNodes;\n\n    for (let /** @type {?} */ i = 0; i < children.length; i++) {\n      let /** @type {?} */ tabbableChild = children[i].nodeType === Node.ELEMENT_NODE ?\n        this._getFirstTabbableElement( /** @type {?} */((children[i] as HTMLElement))) :\n        null;\n\n      if (tabbableChild) {\n        return tabbableChild;\n      }\n    }\n\n    return null;\n  }\n/**\n * Get the last tabbable element from a DOM subtree (inclusive).\n * @param {?} root\n * @return {?}\n */\nprivate _getLastTabbableElement(root: HTMLElement): HTMLElement {\n    if (this._checker.isFocusable(root) && this._checker.isTabbable(root)) {\n      return root;\n    }\n\n    // Iterate in reverse DOM order.\n    let /** @type {?} */ children = root.children || root.childNodes;\n\n    for (let /** @type {?} */ i = children.length - 1; i >= 0; i--) {\n      let /** @type {?} */ tabbableChild = children[i].nodeType === Node.ELEMENT_NODE ?\n        this._getLastTabbableElement( /** @type {?} */((children[i] as HTMLElement))) :\n        null;\n\n      if (tabbableChild) {\n        return tabbableChild;\n      }\n    }\n\n    return null;\n  }\n/**\n * Creates an anchor element.\n * @return {?}\n */\nprivate _createAnchor(): HTMLElement {\n    let /** @type {?} */ anchor = document.createElement('div');\n    anchor.tabIndex = this._enabled ? 0 : -1;\n    anchor.classList.add('cdk-visually-hidden');\n    anchor.classList.add('cdk-focus-trap-anchor');\n    return anchor;\n  }\n}\n\nfunction FocusTrap_tsickle_Closure_declarations() {\n/** @type {?} */\nFocusTrap.prototype._startAnchor;\n/** @type {?} */\nFocusTrap.prototype._endAnchor;\n/** @type {?} */\nFocusTrap.prototype._enabled;\n/** @type {?} */\nFocusTrap.prototype._element;\n/** @type {?} */\nFocusTrap.prototype._checker;\n/** @type {?} */\nFocusTrap.prototype._ngZone;\n}\n\n/**\n * Factory that allows easy instantiation of focus traps.\n */\nexport class FocusTrapFactory {\n/**\n * @param {?} _checker\n * @param {?} _ngZone\n */\nconstructor(private _checker: InteractivityChecker,\nprivate _ngZone: NgZone) { }\n/**\n * @param {?} element\n * @param {?=} deferAnchors\n * @return {?}\n */\ncreate(element: HTMLElement, deferAnchors = false): FocusTrap {\n    return new FocusTrap(element, this._checker, this._ngZone, deferAnchors);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: InteractivityChecker, },\n{type: NgZone, },\n];\n}\n\nfunction FocusTrapFactory_tsickle_Closure_declarations() {\n/** @type {?} */\nFocusTrapFactory.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nFocusTrapFactory.ctorParameters;\n/** @type {?} */\nFocusTrapFactory.prototype._checker;\n/** @type {?} */\nFocusTrapFactory.prototype._ngZone;\n}\n\n/**\n * Directive for trapping focus within a region.\n * @deprecated\n */\nexport class FocusTrapDeprecatedDirective implements OnDestroy, AfterContentInit {\n  focusTrap: FocusTrap;\n/**\n * Whether the focus trap is active.\n * @return {?}\n */\nget disabled(): boolean { return !this.focusTrap.enabled; }\n/**\n * @param {?} val\n * @return {?}\n */\nset disabled(val: boolean) {\n    this.focusTrap.enabled = !coerceBooleanProperty(val);\n  }\n/**\n * @param {?} _elementRef\n * @param {?} _focusTrapFactory\n */\nconstructor(private _elementRef: ElementRef,\nprivate _focusTrapFactory: FocusTrapFactory) {\n    this.focusTrap = this._focusTrapFactory.create(this._elementRef.nativeElement, true);\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.focusTrap.destroy();\n  }\n/**\n * @return {?}\n */\nngAfterContentInit() {\n    this.focusTrap.attachAnchors();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: 'cdk-focus-trap',\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: FocusTrapFactory, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'disabled': [{ type: Input },],\n};\n}\n\nfunction FocusTrapDeprecatedDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nFocusTrapDeprecatedDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nFocusTrapDeprecatedDirective.ctorParameters;\n/** @type {?} */\nFocusTrapDeprecatedDirective.propDecorators;\n/** @type {?} */\nFocusTrapDeprecatedDirective.prototype.focusTrap;\n/** @type {?} */\nFocusTrapDeprecatedDirective.prototype._elementRef;\n/** @type {?} */\nFocusTrapDeprecatedDirective.prototype._focusTrapFactory;\n}\n\n/**\n * Directive for trapping focus within a region.\n */\nexport class FocusTrapDirective implements OnDestroy, AfterContentInit {\n  focusTrap: FocusTrap;\n/**\n * Whether the focus trap is active.\n * @return {?}\n */\nget enabled(): boolean { return this.focusTrap.enabled; }\n/**\n * @param {?} value\n * @return {?}\n */\nset enabled(value: boolean) { this.focusTrap.enabled = coerceBooleanProperty(value); }\n/**\n * @param {?} _elementRef\n * @param {?} _focusTrapFactory\n */\nconstructor(private _elementRef: ElementRef,\nprivate _focusTrapFactory: FocusTrapFactory) {\n    this.focusTrap = this._focusTrapFactory.create(this._elementRef.nativeElement, true);\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.focusTrap.destroy();\n  }\n/**\n * @return {?}\n */\nngAfterContentInit() {\n    this.focusTrap.attachAnchors();\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[cdkTrapFocus]',\n  exportAs: 'cdkTrapFocus',\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: FocusTrapFactory, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'enabled': [{ type: Input, args: ['cdkTrapFocus', ] },],\n};\n}\n\nfunction FocusTrapDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nFocusTrapDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nFocusTrapDirective.ctorParameters;\n/** @type {?} */\nFocusTrapDirective.propDecorators;\n/** @type {?} */\nFocusTrapDirective.prototype.focusTrap;\n/** @type {?} */\nFocusTrapDirective.prototype._elementRef;\n/** @type {?} */\nFocusTrapDirective.prototype._focusTrapFactory;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}