{"version":3,"sources":["../../../../../src/lib/core/portal/portal.ts"],"names":[],"mappings":"AAOA,OAAO,EACH,mBAAmB,EACnB,0BAA0B,EAC1B,qBAAqB,EACrB,eAAe,EACf,8BAA8B,EAC9B,sBAAsB,EACzB,MAAM,iBAAiB,CAAC;AAEzB;;;;GAIG;AACH,MAEC;IAAD;;;;OAIG;IACH,MADG,CAAA,IAAA;QAEC,EAAE,CAAC,CAAC,IADC,IAAO,IAAA,CAAK,CAAC,CAAA;YAEhB,MADM,IAAI,mBAAA,EAAoB,CAAE;QAElC,CAAC;QAED,EAAE,CAAC,CAAC,IADC,CAAI,WAAC,EAAW,CAAE,CAAC,CAAA;YAEtB,MADM,IAAI,0BAAA,EAA2B,CAAE;QAEzC,CAAC;QAED,IAAI,CADC,aAAC,GAAe,IAAA,CAAK;QAE1B,MAAM,CAAiB,CADZ,IAAA,CAAK,MAAC,CAAM,IAAC,CAAI,CAAA,CAAC;IAE/B,CAAC;IACH;;;OAGG;IACH,MAHG;QAIC,IAAI,gBAAgB,CAHhB,IAAA,GAAO,IAAA,CAAK,aAAC,CAAa;QAI9B,EAAE,CAAC,CAAC,IAHC,IAAO,IAAA,CAAK,CAAC,CAAA;YAIhB,MAHM,IAAI,qBAAA,EAAsB,CAAE;QAIpC,CAAC;QAED,IAAI,CAHC,aAAC,GAAe,IAAA,CAAK;QAI1B,MAAM,CAHC,IAAA,CAAK,MAAC,EAAM,CAAE;IAIvB,CAAC;IACH;;;OAGG;IACH,IALG,UAAA;QAMC,MAAM,CALC,IAAA,CAAK,aAAC,IAAgB,IAAA,CAAK;IAMpC,CAAC;IACH;;;;;OAKG;IACH,eANG,CAAA,IAAA;QAOC,IAAI,CANC,aAAC,GAAe,IAAA,CAAK;IAO5B,CAAC;CACF;AAED;IACA,gBAAgB;IAChB,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC;AAC/B,CAAC;AAED;;GAEG;AACH,MAVC,sBAAA,SAAA,MAAA;IAyBD;;;;OAIG;IACH,YACM,SAhB2B,EAiB3B,mBAhBqC,IAAA,EAiBrC,WAhBqB,IAAA;QAiBvB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;CACF;AAED;IACA;;;OAGG;IACH,eAAe,CAAC,SAAS,CAAC,SAAS,CAAC;IACpC;;;;;OAKG;IACH,eAAe,CAAC,SAAS,CAAC,gBAAgB,CAAC;IAC3C;;;OAGG;IACH,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC;AACnC,CAAC;AAED;;GAEG;AACH,MAnCC,qBAAA,SAAA,MAAA;IAmDD;;;OAGG;IACH,YAxCG,QAAqC,EAAE,gBAAkB;QAyCxD,KAAK,EAAE,CAAC;QAZZ;;;;;WAKG;QACH,WArCG,GAAA,IAAA,GAAA,EAAA,CAAA;QA4CC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;IAC3C,CAAC;IACH;;OAEG;IACH,IA1CG,MAAA;QA2CC,MAAM,CA1CC,IAAA,CAAK,WAAC,CAAW,UAAC,CAAU;IA2CrC,CAAC;IACH;;;;OAIG;IACH,MA9CG,CAAA,IAAA,EAAA,MAAA;QA+CC,IAAI,CA9CC,MAAC,GAAQ,MAAA,IAAU,IAAA,GAAO,IAAI,GAAA,EAAgB,GAAK,MAAA,CAAO;QA+C/D,MAAM,CA9CC,KAAA,CAAM,MAAC,CAAM,IAAC,CAAI,CAAC;IA+C5B,CAAC;IACH;;OAEG;IACH,MAhDG;QAiDC,IAAI,CAhDC,MAAC,GAAQ,IAAI,GAAA,EAAgB,CAAG;QAiDrC,MAAM,CAhDC,KAAA,CAAM,MAAC,EAAM,CAAE;IAiDxB,CAAC;CACF;AAED;IACA;;;OAGG;IACH,cAAc,CAAC,SAAS,CAAC,WAAW,CAAC;IACrC;;;OAGG;IACH,cAAc,CAAC,SAAS,CAAC,gBAAgB,CAAC;IAC1C;;;;;;OAMG;IACH,cAAc,CAAC,SAAS,CAAC,MAAM,CAAC;AAChC,CAAC;AAgBD;;;;GAIG;AACH,MArEC;IAqED;QASA;;WAEG;QAxEA,gBAAA,GAAA,KAAA,CAAA;IA+JH,CAAC;IArFD;;;OAGG;IACH,WA3EG;QA4EC,MAAM,CA3EC,CAAA,CAAE,IAAC,CAAI,eAAC,CAAe;IA4EhC,CAAC;IACH;;;OAGG;IACH,MA9EG,CAAA,MAAA;QA+EC,EAAE,CAAC,CAAC,CA9EC,MAAC,CAAM,CAAC,CAAA;YA+EX,MA9EM,IAAI,eAAA,EAAgB,CAAE;QA+E9B,CAAC;QAED,EAAE,CAAC,CAAC,IA9EC,CAAI,WAAC,EAAW,CAAE,CAAC,CAAA;YA+EtB,MA9EM,IAAI,0BAAA,EAA2B,CAAE;QA+EzC,CAAC;QAED,EAAE,CAAC,CAAC,IA9EC,CAAI,WAAC,CAAW,CAAC,CAAA;YA+EpB,MA9EM,IAAI,8BAAA,EAA+B,CAAE;QA+E7C,CAAC;QAED,EAAE,CAAC,CAAC,MA9EC,YAAiB,eAAA,CAAgB,CAAC,CAAA;YA+ErC,IAAI,CA9EC,eAAC,GAAiB,MAAA,CAAO;YA+E9B,MAAM,CA9EC,IAAA,CAAK,qBAAC,CAAqB,MAAC,CAAM,CAAC;QA+E5C,CAAC;QA9EC,IAAA,CAAK,EAAA,CAAA,CAAA,MAAK,YAAiB,cAAA,CAAe,CAAC,CAAA;YA+E3C,IAAI,CA9EC,eAAC,GAAiB,MAAA,CAAO;YA+E9B,MAAM,CA9EC,IAAA,CAAK,oBAAC,CAAoB,MAAC,CAAM,CAAC;QA+E3C,CAAC;QAED,MA9EM,IAAI,sBAAA,EAAuB,CAAE;IA+ErC,CAAC;IACH;;;;;OAKG;IACH,qBAnFY,CAAA,MAAA,IAAA,CAAA;IAoFZ;;;;OAIG;IACH,oBAvFY,CAAA,MAAA,IAAA,CAAA;IAwFZ;;OAEG;IACH,MAzFG;QA0FC,EAAE,CAAC,CAAC,IAzFC,CAAI,eAAC,CAAe,CAAC,CAAA;YA0FxB,IAAI,CAzFC,eAAC,CAAe,eAAC,CAAe,IAAC,CAAI,CAAC;YA0F3C,IAAI,CAzFC,eAAC,GAAiB,IAAA,CAAK;QA0F9B,CAAC;QAED,IAAI,CAzFC,gBAAC,EAAgB,CAAE;IA0F1B,CAAC;IACH;;OAEG;IACH,OA3FG;QA4FC,EAAE,CAAC,CAAC,IA3FC,CAAI,WAAC,EAAW,CAAE,CAAC,CAAA;YA4FtB,IAAI,CA3FC,MAAC,EAAM,CAAE;QA4FhB,CAAC;QAED,IAAI,CA3FC,gBAAC,EAAgB,CAAE;QA4FxB,IAAI,CA3FC,WAAC,GAAa,IAAA,CAAK;IA4F1B,CAAC;IACH;;;OAGG;IACH,YA9FG,CAAA,EAAA;QA+FC,IAAI,CA9FC,UAAC,GAAY,EAAA,CAAG;IA+FvB,CAAC;IACH;;OAEG;IA/FA,gBAAA;QAiGC,EAAE,CAAC,CAAC,IAhGC,CAAI,UAAC,CAAU,CAAC,CAAA;YAiGnB,IAAI,CAhGC,UAAC,EAAU,CAAE;YAiGlB,IAAI,CAhGC,UAAC,GAAY,IAAA,CAAK;QAiGzB,CAAC;IACH,CAAC;CACF;AAED;IACA;;;OAGG;IACH,cAAc,CAAC,SAAS,CAAC,eAAe,CAAC;IACzC;;;OAGG;IACH,cAAc,CAAC,SAAS,CAAC,UAAU,CAAC;IACpC;;;OAGG;IACH,cAAc,CAAC,SAAS,CAAC,WAAW,CAAC;AACrC,CAAC","file":"portal.js","sourceRoot":"","sourcesContent":["import {\n    TemplateRef,\n    ViewContainerRef,\n    ElementRef,\n    ComponentRef,\n    Injector\n} from '@angular/core';\nimport {\n    NullPortalHostError,\n    PortalAlreadyAttachedError,\n    NoPortalAttachedError,\n    NullPortalError,\n    PortalHostAlreadyDisposedError,\n    UnknownPortalTypeError\n} from './portal-errors';\nimport {ComponentType} from '../overlay/generic-component-type';\n/**\n * A `Portal` is something that you want to render somewhere else.\n * It can be attach to / detached from a `PortalHost`.\n * @abstract\n */\nexport abstract class Portal<T> {\nprivate _attachedHost: PortalHost;\n/**\n * Attach this portal to a host.\n * @param {?} host\n * @return {?}\n */\nattach(host: PortalHost): T {\n    if (host == null) {\n      throw new NullPortalHostError();\n    }\n\n    if (host.hasAttached()) {\n      throw new PortalAlreadyAttachedError();\n    }\n\n    this._attachedHost = host;\n    return /** @type {?} */(( <T> host.attach(this)));\n  }\n/**\n * Detach this portal from its host\n * @return {?}\n */\ndetach(): void {\n    let /** @type {?} */ host = this._attachedHost;\n    if (host == null) {\n      throw new NoPortalAttachedError();\n    }\n\n    this._attachedHost = null;\n    return host.detach();\n  }\n/**\n * Whether this portal is attached to a host.\n * @return {?}\n */\nget isAttached(): boolean {\n    return this._attachedHost != null;\n  }\n/**\n * Sets the PortalHost reference without performing `attach()`. This is used directly by\n * the PortalHost when it is performing an `attach()` or `detach()`.\n * @param {?} host\n * @return {?}\n */\nsetAttachedHost(host: PortalHost) {\n    this._attachedHost = host;\n  }\n}\n\nfunction Portal_tsickle_Closure_declarations() {\n/** @type {?} */\nPortal.prototype._attachedHost;\n}\n\n/**\n * A `ComponentPortal` is a portal that instantiates some Component upon attachment.\n */\nexport class ComponentPortal<T> extends Portal<ComponentRef<T>> {\n/**\n * The type of the component that will be instantiated for attachment.\n */\ncomponent: ComponentType<T>;\n/**\n * [Optional] Where the attached component should live in Angular's *logical* component tree.\n * This is different from where the component *renders*, which is determined by the PortalHost.\n * The origin is necessary when the host is outside of the Angular application context.\n */\nviewContainerRef: ViewContainerRef;\n/**\n * [Optional] Injector used for the instantiation of the component.\n */\ninjector: Injector;\n/**\n * @param {?} component\n * @param {?=} viewContainerRef\n * @param {?=} injector\n */\nconstructor(\n      component: ComponentType<T>,\n      viewContainerRef: ViewContainerRef = null,\n      injector: Injector = null) {\n    super();\n    this.component = component;\n    this.viewContainerRef = viewContainerRef;\n    this.injector = injector;\n  }\n}\n\nfunction ComponentPortal_tsickle_Closure_declarations() {\n/**\n * The type of the component that will be instantiated for attachment.\n * @type {?}\n */\nComponentPortal.prototype.component;\n/**\n * [Optional] Where the attached component should live in Angular's *logical* component tree.\n * This is different from where the component *renders*, which is determined by the PortalHost.\n * The origin is necessary when the host is outside of the Angular application context.\n * @type {?}\n */\nComponentPortal.prototype.viewContainerRef;\n/**\n * [Optional] Injector used for the instantiation of the component.\n * @type {?}\n */\nComponentPortal.prototype.injector;\n}\n\n/**\n * A `TemplatePortal` is a portal that represents some embedded template (TemplateRef).\n */\nexport class TemplatePortal extends Portal<Map<string, any>> {\n/**\n * The embedded template that will be used to instantiate an embedded View in the host.\n */\ntemplateRef: TemplateRef<any>;\n/**\n * Reference to the ViewContainer into which the template will be stamped out.\n */\nviewContainerRef: ViewContainerRef;\n/**\n * Additional locals for the instantiated embedded view.\n * These locals can be seen as \"exports\" for the template, such as how ngFor has\n * index / event / odd.\n * See https://angular.io/docs/ts/latest/api/core/EmbeddedViewRef-class.html\n */\nlocals: Map<string, any> = new Map<string, any>();\n/**\n * @param {?} template\n * @param {?} viewContainerRef\n */\nconstructor(template: TemplateRef<any>, viewContainerRef: ViewContainerRef) {\n    super();\n    this.templateRef = template;\n    this.viewContainerRef = viewContainerRef;\n  }\n/**\n * @return {?}\n */\nget origin(): ElementRef {\n    return this.templateRef.elementRef;\n  }\n/**\n * @param {?} host\n * @param {?=} locals\n * @return {?}\n */\nattach(host: PortalHost, locals?: Map<string, any>): Map<string, any> {\n    this.locals = locals == null ? new Map<string, any>() : locals;\n    return super.attach(host);\n  }\n/**\n * @return {?}\n */\ndetach(): void {\n    this.locals = new Map<string, any>();\n    return super.detach();\n  }\n}\n\nfunction TemplatePortal_tsickle_Closure_declarations() {\n/**\n * The embedded template that will be used to instantiate an embedded View in the host.\n * @type {?}\n */\nTemplatePortal.prototype.templateRef;\n/**\n * Reference to the ViewContainer into which the template will be stamped out.\n * @type {?}\n */\nTemplatePortal.prototype.viewContainerRef;\n/**\n * Additional locals for the instantiated embedded view.\n * These locals can be seen as \"exports\" for the template, such as how ngFor has\n * index / event / odd.\n * See https://angular.io/docs/ts/latest/api/core/EmbeddedViewRef-class.html\n * @type {?}\n */\nTemplatePortal.prototype.locals;\n}\n\n\n\n/**\n * A `PortalHost` is an space that can contain a single `Portal`.\n */\nexport interface PortalHost {\n  attach(portal: Portal<any>): any;\n\n  detach(): any;\n\n  dispose(): void;\n\n  hasAttached(): boolean;\n}\n/**\n * Partial implementation of PortalHost that only deals with attaching either a\n * ComponentPortal or a TemplatePortal.\n * @abstract\n */\nexport abstract class BasePortalHost implements PortalHost {\n/**\n * The portal currently attached to the host.\n */\nprivate _attachedPortal: Portal<any>;\n/**\n * A function that will permanently dispose this host.\n */\nprivate _disposeFn: () => void;\n/**\n * Whether this host has already been permanently disposed.\n */\nprivate _isDisposed: boolean = false;\n/**\n * Whether this host has an attached portal.\n * @return {?}\n */\nhasAttached(): boolean {\n    return !!this._attachedPortal;\n  }\n/**\n * @param {?} portal\n * @return {?}\n */\nattach(portal: Portal<any>): any {\n    if (!portal) {\n      throw new NullPortalError();\n    }\n\n    if (this.hasAttached()) {\n      throw new PortalAlreadyAttachedError();\n    }\n\n    if (this._isDisposed) {\n      throw new PortalHostAlreadyDisposedError();\n    }\n\n    if (portal instanceof ComponentPortal) {\n      this._attachedPortal = portal;\n      return this.attachComponentPortal(portal);\n    } else if (portal instanceof TemplatePortal) {\n      this._attachedPortal = portal;\n      return this.attachTemplatePortal(portal);\n    }\n\n    throw new UnknownPortalTypeError();\n  }\n/**\n * @abstract\n * @template T\n * @param {?} portal\n * @return {?}\n */\nattachComponentPortal<T>(portal: ComponentPortal<T>) {}\n/**\n * @abstract\n * @param {?} portal\n * @return {?}\n */\nattachTemplatePortal(portal: TemplatePortal) {}\n/**\n * @return {?}\n */\ndetach(): void {\n    if (this._attachedPortal) {\n      this._attachedPortal.setAttachedHost(null);\n      this._attachedPortal = null;\n    }\n\n    this._invokeDisposeFn();\n  }\n/**\n * @return {?}\n */\ndispose() {\n    if (this.hasAttached()) {\n      this.detach();\n    }\n\n    this._invokeDisposeFn();\n    this._isDisposed = true;\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nsetDisposeFn(fn: () => void) {\n    this._disposeFn = fn;\n  }\n/**\n * @return {?}\n */\nprivate _invokeDisposeFn() {\n    if (this._disposeFn) {\n      this._disposeFn();\n      this._disposeFn = null;\n    }\n  }\n}\n\nfunction BasePortalHost_tsickle_Closure_declarations() {\n/**\n * The portal currently attached to the host.\n * @type {?}\n */\nBasePortalHost.prototype._attachedPortal;\n/**\n * A function that will permanently dispose this host.\n * @type {?}\n */\nBasePortalHost.prototype._disposeFn;\n/**\n * Whether this host has already been permanently disposed.\n * @type {?}\n */\nBasePortalHost.prototype._isDisposed;\n}\n\n"]}